# twerge
<!-- https://pkg.go.dev/github.com/conneroisu/twerge -->

[![Go Reference](https://pkg.go.dev/badge/github.com/conneroisu/twerge.svg)](https://pkg.go.dev/github.com/conneroisu/twerge)
[![Go Report Card](https://goreportcard.com/badge/github.com/conneroisu/twerge)](https://goreportcard.com/report/github.com/conneroisu/twerge)
[![GoDoc](https://godoc.org/github.com/conneroisu/twerge?status.svg)](https://godoc.org/github.com/conneroisu/twerge)

![Logo](./assets/twerge.png)

generates tailwind merges and classes from go templ sources

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# twerge

```go
import "github.com/conneroisu/twerge"
```

Package twerge provides a tailwind merger for go\-templ with class generation and runtime static hashmap.

It performs four key functions: 1. Merges TailwindCSS classes intelligently \(resolving conflicts\) 2. Generates short unique CSS class names from the merged classes 3. Creates a mapping from original class strings to generated class names 4. Provides a runtime static hashmap for direct class name lookup

Basic Usage:

```
import "github.com/conneroisu/twerge"
```

## Index

- [Variables](<#variables>)
- [type AmnesicMerger](<#AmnesicMerger>)
  - [func \(m \*AmnesicMerger\) Merge\(classes string\) string](<#AmnesicMerger.Merge>)
- [type Cache](<#Cache>)
  - [func NewCache\(\) \*Cache](<#NewCache>)
  - [func NewCacheFromMaps\(raw, merged map\[string\]string\) \*Cache](<#NewCacheFromMaps>)
  - [func \(c \*Cache\) All\(\) func\(yield func\(string, CacheValue\) bool\)](<#Cache.All>)
  - [func \(c \*Cache\) Get\(key string\) \(string, string\)](<#Cache.Get>)
  - [func \(c \*Cache\) Set\(raw, merged string\) string](<#Cache.Set>)
- [type CacheValue](<#CacheValue>)
- [type Generater](<#Generater>)
- [type Generator](<#Generator>)
  - [func NewGenerator\(config \*config\) \*Generator](<#NewGenerator>)
  - [func \(g \*Generator\) Cached\(\) cacher](<#Generator.Cached>)
  - [func \(g \*Generator\) GenCSS\(ctx context.Context, classPath, inputCSSPath, templPath string, components ...templ.Component\) error](<#Generator.GenCSS>)
  - [func \(g \*Generator\) If\(cond bool, trueClass, falseClass string\) string](<#Generator.If>)
  - [func \(g \*Generator\) It\(classes string\) string](<#Generator.It>)
- [type Merger](<#Merger>)
- [type MergerImpl](<#MergerImpl>)
  - [func NewMerger\(config \*config\) \*MergerImpl](<#NewMerger>)
  - [func \(m \*MergerImpl\) Merge\(classes string\) string](<#MergerImpl.Merge>)


## Variables

<a name="DefaultMerger"></a>

```go
var (
    // DefaultMerger is the default template merger
    DefaultMerger = NewMerger(defaultConfig)
    // DefaultGenerator is the default implementation of the Generater interface.
    DefaultGenerator = NewGenerator(defaultConfig)
    // DefaultCache is the default cache object.
    DefaultCache = NewCache()
    // Merge is the default template merger
    //
    // It takes a space-delimited string of TailwindCSS classes and returns
    // a merged string
    //
    // It also adds the merged class to the ClassMapStr when used
    //
    // It will quickly return the generated class name from ClassMapStr if
    // available
    Merge = DefaultMerger.Merge
    // It returns a short unique CSS class name from the merged classes
    // given a raw class string.
    //
    // It will quickly return the existing class name if the class name already
    // exists in the cache.
    //
    // Example:
    //
    //	templ ExampleComp () {
    //		<div class={twerge.It("bg-red-500 text-white")}>
    //			Hello World
    //		</div>
    //	}
    It  = DefaultGenerator.It
    // If returns a short unique CSS class name from the merged classes for a conditional.
    If  = DefaultGenerator.If
    // GenCSS generates the CSS classes from the provided components.
    GenCSS = DefaultGenerator.GenCSS
)
```

<a name="AmnesicMerger"></a>
## type [AmnesicMerger](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L111-L113>)

AmnesicMerger is the default template merger for generating Tailwind CSS classes.

It does not modify it's cache.

```go
type AmnesicMerger struct {
    // contains filtered or unexported fields
}
```

<a name="AmnesicMerger.Merge"></a>
### func \(\*AmnesicMerger\) [Merge](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L408>)

```go
func (m *AmnesicMerger) Merge(classes string) string
```

Merge is the default template merger's Merge function.

This functions definition makes the template merger implement the Merger interface.

<a name="Cache"></a>
## type [Cache](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L9-L12>)

Cache is a simple thread\-safe cache.

```go
type Cache struct {
    Map map[string]CacheValue
    // contains filtered or unexported fields
}
```

<a name="NewCache"></a>
### func [NewCache](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L21>)

```go
func NewCache() *Cache
```

NewCache creates a new cache.

<a name="NewCacheFromMaps"></a>
### func [NewCacheFromMaps](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L29>)

```go
func NewCacheFromMaps(raw, merged map[string]string) *Cache
```

NewCacheFromMaps creates a new cache from the given maps.

<a name="Cache.All"></a>
### func \(\*Cache\) [All](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L63>)

```go
func (c *Cache) All() func(yield func(string, CacheValue) bool)
```

All returns an iterator over the string keys and CacheValue values in the cache.

<a name="Cache.Get"></a>
### func \(\*Cache\) [Get](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L44>)

```go
func (c *Cache) Get(key string) (string, string)
```

Get returns the value for the given key in the merged cache.

<a name="Cache.Set"></a>
### func \(\*Cache\) [Set](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L51>)

```go
func (c *Cache) Set(raw, merged string) string
```

Set sets the value for the given key in the merged cache.

<a name="CacheValue"></a>
## type [CacheValue](<https://github.com/conneroisu/tmplmerge/blob/main/cache.go#L15-L18>)

CacheValue is a cache value.

```go
type CacheValue struct {
    Generated string
    Merged    string
}
```

<a name="Generater"></a>
## type [Generater](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L92-L100>)

Generater is the minimal interface for generating Tailwind CSS classes.

```go
type Generater interface {
    It(classes string) string
    If(cond bool, trueClass, falseClass string) string
    Cached() cacher
    GenCSS(ctx context.Context,
        classPath, twPath, templPath string,
        components ...templ.Component,
    ) error
}
```

<a name="Generator"></a>
## type [Generator](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L102-L107>)

Generator is the default implementation of the Generator interface.

```go
type Generator struct {
    Config *config
    Merger Merger
    Cache  cacher
    Logger *slog.Logger
}
```

<a name="NewGenerator"></a>
### func [NewGenerator](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L166>)

```go
func NewGenerator(config *config) *Generator
```

NewGenerator creates a new Generator.

<a name="Generator.Cached"></a>
### func \(\*Generator\) [Cached](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L599>)

```go
func (g *Generator) Cached() cacher
```

Cached returns the cacher for the Generator.

<a name="Generator.GenCSS"></a>
### func \(\*Generator\) [GenCSS](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L438-L442>)

```go
func (g *Generator) GenCSS(ctx context.Context, classPath, inputCSSPath, templPath string, components ...templ.Component) error
```

GenCSS generates the CSS classes from the provided components.

<a name="Generator.If"></a>
### func \(\*Generator\) [If](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L428>)

```go
func (g *Generator) If(cond bool, trueClass, falseClass string) string
```

If returns a short unique CSS class name from the merged classes.

If the class name already exists, it will return the existing class name.

If the class name does not exist, it will generate a new class name and return it.

<a name="Generator.It"></a>
### func \(\*Generator\) [It](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L387>)

```go
func (g *Generator) It(classes string) string
```

It returns a short unique CSS class name from the merged classes.

If the class name already exists, it will return the existing class name.

If the class name does not exist, it will generate a new class name and return it.

<a name="Merger"></a>
## type [Merger](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L81-L83>)

Merger is the minimal interface for merging Tailwind CSS classes

```go
type Merger interface {
    Merge(classes string) string
}
```

<a name="MergerImpl"></a>
## type [MergerImpl](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L85-L89>)

MergerImpl is the default template merger

```go
type MergerImpl struct {
    Config *config
    Cache  cacher
    Logger *slog.Logger
}
```

<a name="NewMerger"></a>
### func [NewMerger](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L117-L119>)

```go
func NewMerger(config *config) *MergerImpl
```

NewMerger creates a new template merger

<a name="MergerImpl.Merge"></a>
### func \(\*MergerImpl\) [Merge](<https://github.com/conneroisu/tmplmerge/blob/main/merge.go#L134-L136>)

```go
func (m *MergerImpl) Merge(classes string) string
```

Merge is the default template merger's Merge function.

This functions definition makes the template merger implement the Merger interface.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
