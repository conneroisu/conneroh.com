-- Code generated by sqlcquash. DO NOT EDIT.
-- versions: 
--	sqlcquash: v0.0.2


-- name: EmbeddingsCreate :one
INSERT INTO
    embeddings (embedding)
VALUES
    (?) RETURNING id;

-- name: EmbeddingsGetByID :one
SELECT
    id,
    embedding
FROM
    embeddings
WHERE
    id = ?
LIMIT
    1;

-- name: PostGet :one
SELECT
    *
FROM
    posts
WHERE
    id = ?
LIMIT
    1;

-- name: PostCreate :one
INSERT INTO
    posts (
        title,
        description,
        slug,
        content,
        banner_url,
        embedding_id
    )
VALUES
    (?, ?, ?, ?, ?, ?) RETURNING *;

-- name: PostDeleteBySlug :exec
DELETE FROM
    posts
WHERE
    slug = ?;

-- name: PostGetBySlug :one
SELECT
    *
FROM
    posts
WHERE
    slug = ?
LIMIT
    1;

-- name: PostsList :many
SELECT
    *
FROM
    posts
ORDER BY
    created_at DESC;

-- name: PostsListByTag :many
SELECT
    p.*
FROM
    posts p
    JOIN post_tags pt ON p.id = pt.post_id
WHERE
    pt.tag_id = ?
ORDER BY
    p.created_at DESC;

-- name: PostUpdate :one
UPDATE
    posts
SET
    title = ?,
    description = ?,
    slug = ?,
    content = ?,
    banner_url = ?
WHERE
    id = ? RETURNING *;

-- name: PostDeleteByID :exec
DELETE FROM
    posts
WHERE
    id = ?;

-- name: PostProjectListByPost :many
SELECT
    p.*
FROM
    post_projects pp
    JOIN projects p ON pp.project_id = p.id
WHERE
    pp.post_id = ?
ORDER BY
    p.name ASC;

-- name: PostsListByProject :many
SELECT
    p.*
FROM
    posts p
    JOIN post_projects pp ON p.id = pp.post_id
WHERE
    pp.project_id = ?
ORDER BY
    p.created_at DESC;

-- name: PostProjectsGetByPostID :many
SELECT
    *
FROM
    post_projects
WHERE
    post_id = ?;

-- name: PostProjectsGetByProjectID :many
SELECT
    *
FROM
    post_projects
WHERE
    project_id = ?;

-- name: PostProjectCreate :exec
INSERT INTO
    post_projects (post_id, project_id)
VALUES
    (?, ?);

-- name: PostProjectDelete :exec
DELETE FROM
    post_projects
WHERE
    post_id = ?
    AND project_id = ?;

-- name: PostTagsGetByPostID :many
SELECT
    *
FROM
    post_tags
WHERE
    post_id = ?;

-- name: PostTagsGetByTagID :many
SELECT
    *
FROM
    post_tags
WHERE
    tag_id = ?;

-- name: PostTagCreate :exec
INSERT INTO
    post_tags (post_id, tag_id)
VALUES
    (?, ?);

-- name: PostTagDelete :exec
DELETE FROM
    post_tags
WHERE
    post_id = ?
    AND tag_id = ?;

-- name: ProjectGetByID :one
SELECT
    *
FROM
    projects
WHERE
    id = ?
LIMIT
    1;

-- name: ProjectGetBySlug :one
SELECT
    *
FROM
    projects
WHERE
    slug = ?
LIMIT
    1;

-- name: ProjectsList :many
SELECT
    *
FROM
    projects
ORDER BY
    created_at DESC;

-- name: ProjectCreate :one
INSERT INTO
    projects (
        name,
        slug,
        description,
        content,
        banner_url,
        embedding_id
    )
VALUES
    (?, ?, ?, ?, ?, ?) RETURNING *;

-- name: ProjectsListByTag :many
SELECT
    p.*
FROM
    projects p
    JOIN project_tags pt ON p.id = pt.project_id
WHERE
    pt.tag_id = ?
ORDER BY
    p.created_at DESC;

-- name: ProjectUpdate :one
UPDATE
    projects
SET
    name = ?,
    slug = ?,
    description = ?,
    content = ?,
    banner_url = ?
WHERE
    id = ? RETURNING *;

-- name: ProjectsListByPost :many
SELECT
    p.*
FROM
    projects p
    JOIN project_posts pp ON p.id = pp.project_id
WHERE
    pp.post_id = ?
ORDER BY
    p.created_at DESC;

-- name: ProjectPostsGetByProjectID :many
SELECT
    *
FROM
    project_posts
WHERE
    project_id = ?;

-- name: ProjectPostsGetByPostID :many
SELECT
    *
FROM
    project_posts
WHERE
    post_id = ?;

-- name: ProjectPostCreate :exec
INSERT INTO
    project_posts (post_id, project_id)
VALUES
    (?, ?);

-- name: ProjectPostDelete :exec
DELETE FROM
    project_posts
WHERE
    project_id = ?
    AND post_id = ?;

-- name: ProjectTagsGetByProjectID :many
SELECT
    *
FROM
    project_tags
WHERE
    project_id = ?;

-- name: ProjectTagsGetByTagID :many
SELECT
    *
FROM
    project_tags
WHERE
    tag_id = ?;

-- name: ProjectTagCreate :exec
INSERT INTO
    project_tags (project_id, tag_id)
VALUES
    (?, ?);

-- name: ProjectTagDelete :exec
DELETE FROM
    project_tags
WHERE
    project_id = ?
    AND tag_id = ?;

-- name: TagGetByID :one
SELECT
    *
FROM
    tags
WHERE
    id = ?
LIMIT
    1;

-- name: TagGetByName :one
SELECT
    *
FROM
    tags
WHERE
    name = ?
LIMIT
    1;

-- name: TagsListAlphabetical :many
SELECT
    *
FROM
    tags
ORDER BY
    name;

-- name: TagCreate :one
INSERT INTO
    tags (name, description, slug, embedding_id)
VALUES
    (?, ?, ?, ?) RETURNING *;

-- name: TagsListByProject :many
SELECT
    t.*
FROM
    tags t
    JOIN project_tags pt ON t.id = pt.tag_id
WHERE
    pt.project_id = ?
ORDER BY
    t.name ASC;

-- name: TagsListByPost :many
SELECT
    t.*
FROM
    tags t
    JOIN post_tags pt ON t.id = pt.tag_id
WHERE
    pt.post_id = ?
ORDER BY
    t.name ASC;

-- name: TagPostsGetByTagID :many
SELECT
    *
FROM
    tag_posts
WHERE
    tag_id = ?;

-- name: TagPostsGetByPostID :many
SELECT
    *
FROM
    tag_posts
WHERE
    post_id = ?;

-- name: TagPostsCreate :exec
INSERT INTO
    tag_posts (tag_id, post_id)
VALUES
    (?, ?);

-- name: TagPostsDelete :exec
DELETE FROM
    tag_posts
WHERE
    tag_id = ?
    AND post_id = ?;

