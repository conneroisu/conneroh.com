-- Code generated by sqlcquash. DO NOT EDIT.
-- versions: 
--	sqlcquash: v0.0.2


-- name: EmbeddingsCreate :one
INSERT INTO
    embeddings (embedding)
VALUES
    (?) RETURNING id;

-- name: EmbeddingsGetByID :one
SELECT
    id,
    embedding
FROM
    embeddings
WHERE
    id = ?
LIMIT
    1;

-- name: EmbeddingsUpdate :exec
UPDATE
    embeddings
SET
    embedding = ?
WHERE
    id = ? RETURNING id;

-- name: EmploymentTagsList :many
SELECT
    *
FROM
    employment_tags;

-- name: EmploymentTagsGet :one
SELECT
    *
FROM
    employment_tags
WHERE
    employment_id = ?
    AND tag_id = ?;

-- name: EmploymentTagsCreate :exec
INSERT INTO
    employment_tags (employment_id, tag_id)
VALUES
    (?, ?);

-- name: EmploymentTagsDelete :exec
DELETE FROM
    employment_tags
WHERE
    employment_id = ?
    AND tag_id = ?;

-- name: EmploymentsList :many
SELECT
    *
FROM
    employments
ORDER BY
    created_at DESC;

-- name: EmploymentsGet :one
SELECT
    *
FROM
    employments
WHERE
    id = ?;

-- name: EmploymentsCreate :exec
INSERT INTO
    employments (
        title,
        slug,
        description,
        banner_url,
        start_date,
        end_date,
        embedding_id
    )
VALUES
    (
        ?,
        ?,
        ?,
        ?,
        ?,
        ?,
        ?
    );

-- name: EmploymentsUpdate :exec
UPDATE
    employments
SET
    title = ?,
    slug = ?,
    description = ?,
    banner_url = ?,
    start_date = ?,
    end_date = ?,
    embedding_id = ?
WHERE
    id = ?;

-- name: PostGet :one
SELECT
    *
FROM
    posts
WHERE
    id = ?
LIMIT
    1;

-- name: PostCreate :one
INSERT INTO
    posts (
        title,
        description,
        slug,
        content,
        raw_content,
        banner_url,
        embedding_id
    )
VALUES
    (?, ?, ?, ?, ?, ?, ?) RETURNING *;

-- name: PostUpdate :one
UPDATE
    posts
SET
    title = ?,
    description = ?,
    slug = ?,
    content = ?,
    raw_content = ?,
    banner_url = ?,
    embedding_id = ?
WHERE
    id = ? RETURNING *;

-- name: PostGetBySlug :one
SELECT
    *
FROM
    posts
WHERE
    slug = ?
LIMIT
    1;

-- name: PostsList :many
SELECT
    *
FROM
    posts
ORDER BY
    created_at DESC;

-- name: PostsListByTag :many
SELECT
    p.*
FROM
    posts p
    JOIN post_tags pt ON p.id = pt.post_id
WHERE
    pt.tag_id = ?
ORDER BY
    p.created_at DESC;

-- name: PostProjectListByPost :many
SELECT
    p.*
FROM
    post_projects pp
    JOIN projects p ON pp.project_id = p.id
WHERE
    pp.post_id = ?
ORDER BY
    p.name ASC;

-- name: PostsListByProject :many
SELECT
    p.*
FROM
    posts p
    JOIN post_projects pp ON p.id = pp.post_id
WHERE
    pp.project_id = ?
ORDER BY
    p.created_at DESC;

-- name: PostProjectsGetByPostID :many
SELECT
    *
FROM
    post_projects
WHERE
    post_id = ?;

-- name: PostProjectsGetByProjectID :many
SELECT
    *
FROM
    post_projects
WHERE
    project_id = ?;

-- name: PostProjectCreate :exec
INSERT INTO
    post_projects (post_id, project_id)
VALUES
    (?, ?);

-- name: PostProjectDelete :exec
DELETE FROM
    post_projects
WHERE
    post_id = ?
    AND project_id = ?;

-- name: PostTagsGetByPostID :many
SELECT
    *
FROM
    post_tags
WHERE
    post_id = ?;

-- name: PostTagsGetByTagID :many
SELECT
    *
FROM
    post_tags
WHERE
    tag_id = ?;

-- name: PostTagCreate :exec
INSERT INTO
    post_tags (post_id, tag_id)
VALUES
    (?, ?);

-- name: PostTagDelete :exec
DELETE FROM
    post_tags
WHERE
    post_id = ?
    AND tag_id = ?;

-- name: PostTagGet :one
SELECT
    *
FROM
    post_tags
WHERE
    post_id = ?
    AND tag_id = ?;

-- name: ProjectGetByID :one
SELECT
    *
FROM
    projects
WHERE
    id = ?
LIMIT
    1;

-- name: ProjectGetBySlug :one
SELECT
    *
FROM
    projects
WHERE
    slug = ?
LIMIT
    1;

-- name: ProjectsList :many
SELECT
    *
FROM
    projects
ORDER BY
    created_at DESC;

-- name: ProjectCreate :one
INSERT INTO
    projects (
        title,
        slug,
        description,
        content,
        raw_content,
        banner_url,
        embedding_id
    )
VALUES
    (?, ?, ?, ?, ?, ?, ?) RETURNING *;

-- name: ProjectUpdate :one
UPDATE
    projects
SET
    title = ?,
    slug = ?,
    description = ?,
    content = ?,
    raw_content = ?,
    banner_url = ?,
    embedding_id = ?
WHERE
    id = ? RETURNING *;

-- name: ProjectsListByTag :many
SELECT
    p.*
FROM
    projects p
    JOIN project_tags pt ON p.id = pt.project_id
WHERE
    pt.tag_id = ?
ORDER BY
    p.created_at DESC;

-- name: ProjectsListByPost :many
SELECT
    p.*
FROM
    projects p
    JOIN post_projects pp ON p.id = pp.project_id
WHERE
    pp.post_id = ?
ORDER BY
    p.created_at DESC;

-- name: ProjectTagsGetByProjectID :many
SELECT
    *
FROM
    project_tags
WHERE
    project_id = ?;

-- name: ProjectTagsGetByIDs :one
SELECT
    *
FROM
    project_tags
WHERE
    project_id = ?
    AND tag_id = ?;

-- name: ProjectTagCreate :exec
INSERT INTO
    project_tags (project_id, tag_id)
VALUES
    (?, ?);

-- name: ProjectTagDelete :exec
DELETE FROM
    project_tags
WHERE
    project_id = ?
    AND tag_id = ?;

-- name: TagGetByID :one
SELECT
    *
FROM
    tags
WHERE
    id = ?
LIMIT
    1;

-- name: TagGetBySlug :one
SELECT
    *
FROM
    tags
WHERE
    slug = ?
LIMIT
    1;

-- name: TagCreate :exec
INSERT INTO
    tags (
        title,
        description,
        content,
        raw_content,
        slug,
        icon,
        embedding_id
    )
VALUES
    (?, ?, ?, ?, ?, ?, ?);

-- name: TagUpdate :exec
UPDATE
    tags
SET
    title = ?,
    slug = ?,
    content = ?,
    icon = ?,
    raw_content = ?,
    description = ?,
    embedding_id = ?
WHERE
    id = ?;

-- name: TagsListAlphabetical :many
SELECT
    t.*
FROM
    tags t
ORDER BY
    t.title ASC;

-- name: TagsListByProject :many
SELECT
    t.*
FROM
    tags t
    JOIN project_tags pt ON t.id = pt.tag_id
WHERE
    pt.project_id = ?
ORDER BY
    t.title ASC;

-- name: TagsListByPost :many
SELECT
    t.*
FROM
    tags t
    JOIN post_tags pt ON t.id = pt.tag_id
WHERE
    pt.post_id = ?
ORDER BY
    t.title ASC;
